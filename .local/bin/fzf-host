#!/bin/sh
#
# Selects one of the known SSH hosts using `fzf`.
#
# Dependencies: `fzf-tmux` (requires `fzf` and `bash`)

# Exit if any command fails.
set -e

[ $# -gt 0 ] && echo "Usage: $0" && exit 1

hosts="$(cut < "${HOME}/.ssh/known_hosts" -d ' ' -f 1)"
if [ -z "${hosts}" ]; then
  echo "No known hosts found!" 2>&1
  exit 1
elif [ "$(echo "${hosts}" | wc -l)" = 1 ]; then
  echo "${hosts}"
else
  fzf-tmux << EOF
${hosts}
EOF
fi
